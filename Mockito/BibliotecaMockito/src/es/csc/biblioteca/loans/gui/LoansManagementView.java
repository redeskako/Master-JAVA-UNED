package es.csc.biblioteca.loans.gui;

//import com.toedter.calendar.JDateChooser;
import es.csc.biblioteca.i18n.LocaleManager;
import java.awt.Color;
import java.awt.Component;
import java.awt.event.ActionListener;
import java.util.StringTokenizer;
import java.util.ArrayList;
import java.util.Date;
import javax.swing.JComboBox;
import javax.swing.JInternalFrame;
import javax.swing.JTable;
import javax.swing.JOptionPane;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableRowSorter;

import java.awt.event.MouseEvent;
/**
 *
 * @author David Atencia
 * @version 0.1
 */
public class LoansManagementView extends JInternalFrame {

    public LoansManagementView() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jPopupMenuLoans = new javax.swing.JPopupMenu();
        jMenuItemAddLoan = new javax.swing.JMenuItem();
        jMenuItemEditLoan = new javax.swing.JMenuItem();
        jMenuItemDeleteLoan = new javax.swing.JMenuItem();
		
		jLabel10 = new javax.swing.JLabel();
        jToolBar1 = new javax.swing.JToolBar();
        btnAdd = new javax.swing.JButton();
        btnEdit = new javax.swing.JButton();
        btnDelete = new javax.swing.JButton();
        btnAcept = new javax.swing.JButton();
        btnCancel = new javax.swing.JButton();
        jSeparator1 = new javax.swing.JToolBar.Separator();
        btnPreview = new javax.swing.JButton();
        btnPrint = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblLoans = new javax.swing.JTable() {
            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                Color color = ((LoansTableModel) super.getModel()).getRowColour(row);
                this.setOpaque(true);
                c.setBackground(color);
                return c;
            }
        };
        jLabelSocio = new javax.swing.JLabel();
        jLabelLibro = new javax.swing.JLabel();
        jComboBoxSocios = new javax.swing.JComboBox();
        jComboBoxLibros = new javax.swing.JComboBox();
        jLabelFechaInicio = new javax.swing.JLabel();
        jLabelFechaFin = new javax.swing.JLabel();
        FechaInicio = new com.toedter.calendar.JDateChooser();
        FechaFin = new com.toedter.calendar.JDateChooser();

        //popup
		jMenuItemAddLoan.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/book_blue_add.png"))); // NOI18N
        jMenuItemAddLoan.setText("jMenuItem1");
        jPopupMenuLoans.add(jMenuItemAddLoan);

        jMenuItemEditLoan.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/book_blue_view.png"))); // NOI18N
        jMenuItemEditLoan.setText("jMenuItem1");
        jPopupMenuLoans.add(jMenuItemEditLoan);

        jMenuItemDeleteLoan.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/book_blue_delete.png"))); // NOI18N
        jMenuItemDeleteLoan.setText("jMenuItem2");
        jPopupMenuLoans.add(jMenuItemDeleteLoan);

        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Loans Management");
        getContentPane().setLayout(new java.awt.GridBagLayout());

        jLabel10.setBackground(new java.awt.Color(64, 64, 64));
        jLabel10.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N
        jLabel10.setForeground(new java.awt.Color(255, 255, 255));
        jLabel10.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/books/gui/resources/books32.png"))); // NOI18N
        jLabel10.setText("Loans Management");
        jLabel10.setFocusable(false);
        jLabel10.setName("etiquetaPrestamos"); // NOI18N
        jLabel10.setOpaque(true);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridwidth = 7;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.ipady = 8;
        getContentPane().add(jLabel10, gridBagConstraints);

        jToolBar1.setFloatable(false);
        jToolBar1.setRollover(true);
        jToolBar1.setName("botonera"); // NOI18N

        btnAdd.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/books/gui/resources/book_blue_add.png"))); // NOI18N
        btnAdd.setText("Add");
        btnAdd.setFocusable(false);
        btnAdd.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnAdd.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToolBar1.add(btnAdd);

        btnEdit.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/book_blue_view.png"))); // NOI18N
        btnEdit.setText("Edit");
        btnEdit.setFocusable(false);
        btnEdit.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnEdit.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToolBar1.add(btnEdit);

        btnDelete.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/book_blue_delete.png"))); // NOI18N
        btnDelete.setText("Delete");
        btnDelete.setFocusable(false);
        btnDelete.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnDelete.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToolBar1.add(btnDelete);

        btnAcept.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/printer.png"))); // NOI18N
        btnAcept.setText("Acept");
        btnAcept.setFocusable(false);
        btnAcept.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnAcept.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToolBar1.add(btnAcept);

        btnCancel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/printer.png"))); // NOI18N
        btnCancel.setText("Cancel");
        btnCancel.setFocusable(false);
        btnCancel.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnCancel.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToolBar1.add(btnCancel);
        jToolBar1.add(jSeparator1);

        btnPreview.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/printer_view.png"))); // NOI18N
        btnPreview.setText("Preview");
        btnPreview.setFocusable(false);
        btnPreview.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnPreview.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToolBar1.add(btnPreview);

        btnPrint.setIcon(new javax.swing.ImageIcon(getClass().getResource("/es/csc/biblioteca/loans/gui/resources/printer.png"))); // NOI18N
        btnPrint.setText("Print");
        btnPrint.setFocusable(false);
        btnPrint.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnPrint.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        jToolBar1.add(btnPrint);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 7;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 0.1;
        getContentPane().add(jToolBar1, gridBagConstraints);

        jScrollPane1.setName("jScrollPane"); // NOI18N

        tblLoans.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Title 1", "Title 2"
            }
        ));
        //popup
		tblLoans.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblLoansMouseClicked(evt);
            }
            public void mousePressed(java.awt.event.MouseEvent evt) {
                tblLoansMousePressed(evt);
            }
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                tblLoansMouseReleased(evt);
            }
        });
        jScrollPane1.setViewportView(tblLoans);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 7;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 0.1;
        gridBagConstraints.weighty = 0.1;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 0, 0);
        getContentPane().add(jScrollPane1, gridBagConstraints);

        jLabelSocio.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelSocio.setText("Socio:");
        jLabelSocio.setName("etiquetaSocio"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        getContentPane().add(jLabelSocio, gridBagConstraints);

        jLabelLibro.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelLibro.setText("Libro:");
        jLabelLibro.setName("etiquetaLibro"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        getContentPane().add(jLabelLibro, gridBagConstraints);

        jComboBoxSocios.setName("socios"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 2.0;
        getContentPane().add(jComboBoxSocios, gridBagConstraints);

        jComboBoxLibros.setName("libros"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 2.0;
        getContentPane().add(jComboBoxLibros, gridBagConstraints);

        jLabelFechaInicio.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelFechaInicio.setText("Fecha Inicio:");
        jLabelFechaInicio.setName("etiquetaInicio"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        getContentPane().add(jLabelFechaInicio, gridBagConstraints);

        jLabelFechaFin.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabelFechaFin.setText("Fecha Fin:");
        jLabelFechaFin.setName("etiquetaFin"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        getContentPane().add(jLabelFechaFin, gridBagConstraints);

        FechaInicio.setName("JDateChooserInicio"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 5;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 2.0;
        getContentPane().add(FechaInicio, gridBagConstraints);

        FechaFin.setName("JDateChooserFin"); // NOI18N
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 5;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 2.0;
        getContentPane().add(FechaFin, gridBagConstraints);

        pack();
    }// </editor-fold>//GEN-END:initComponents
	
	 //popup
	 private void tblLoansMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblLoansMouseClicked
        // TODO add your handling code here:

    }//GEN-LAST:event_tblLoansMouseClicked
    
    private void tblLoansMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblLoansMousePressed
        if (evt.isPopupTrigger()) {
            showPopupMenu(evt);
        }        // TODO add your handling code here:
    }//GEN-LAST:event_tblLoansMousePressed

    private void tblLoansMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblLoansMouseReleased
    if (evt.isPopupTrigger()) {
        showPopupMenu(evt);
    }        // TODO add your handling code here:
    }//GEN-LAST:event_tblLoansMouseReleased
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    
	//popup
    private javax.swing.JMenuItem jMenuItemAddLoan;
    private javax.swing.JMenuItem jMenuItemDeleteLoan;
    private javax.swing.JMenuItem jMenuItemEditLoan;
    private javax.swing.JPopupMenu jPopupMenuLoans;
	
	
	private com.toedter.calendar.JDateChooser FechaFin;
    private com.toedter.calendar.JDateChooser FechaInicio;
    private javax.swing.JButton btnAcept;
    private javax.swing.JButton btnAdd;
    private javax.swing.JButton btnCancel;
    private javax.swing.JButton btnDelete;
    private javax.swing.JButton btnEdit;
    private javax.swing.JButton btnPreview;
    private javax.swing.JButton btnPrint;
    private javax.swing.JComboBox jComboBoxLibros;
    private javax.swing.JComboBox jComboBoxSocios;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabelFechaFin;
    private javax.swing.JLabel jLabelFechaInicio;
    private javax.swing.JLabel jLabelLibro;
    private javax.swing.JLabel jLabelSocio;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JToolBar.Separator jSeparator1;
    private javax.swing.JToolBar jToolBar1;
    private javax.swing.JTable tblLoans;
    // End of variables declaration//GEN-END:variables

    //popup
    public void setPopupAddListener(ActionListener l, String command) {
        this.jMenuItemAddLoan.addActionListener(l);
        this.jMenuItemAddLoan.setActionCommand(command);
    }
    
    public void setPopupEditListener(ActionListener l, String command) {
        this.jMenuItemEditLoan.addActionListener(l);
        this.jMenuItemEditLoan.setActionCommand(command);
    }
    
    public void setPopupDeleteListener(ActionListener l, String command) {
        this.jMenuItemDeleteLoan.addActionListener(l);
        this.jMenuItemDeleteLoan.setActionCommand(command);
    }
    //endpopup 	
	
	public void setAddListener(ActionListener l, String command) {
        this.btnAdd.addActionListener(l);
        this.btnAdd.setActionCommand(command);
    }
    
    public void setEditListener(ActionListener l, String command) {
        this.btnEdit.addActionListener(l);
        this.btnEdit.setActionCommand(command);
    }
    
    public void setDeleteListener(ActionListener l, String command) {
        this.btnDelete.addActionListener(l);
        this.btnDelete.setActionCommand(command);
    }
    
    public void setPrintListener(ActionListener l, String command) {
        this.btnPrint.addActionListener(l);
        this.btnPrint.setActionCommand(command);
    }
    
    public void setPreviewListener(ActionListener l, String command) {
        this.btnPreview.addActionListener(l);
        this.btnPreview.setActionCommand(command);
    }
    
    public void setAceptListener(ActionListener l, String command) {
        this.btnAcept.addActionListener(l);
        this.btnAcept.setActionCommand(command);
    }
    
    public void setCancelListener(ActionListener l, String command) {
        this.btnCancel.addActionListener(l);
        this.btnCancel.setActionCommand(command);
    }
    
    public void setTableModel(AbstractTableModel m) {
        this.tblLoans.setModel(m);
    }
    
    public void setRowSorter(TableRowSorter sorter) {
        this.tblLoans.setRowSorter(sorter);
    }
    
    public JTable getTable() {
        return this.tblLoans;
    }
    
    public int getSelectedRow() {
        return this.tblLoans.convertRowIndexToModel(this.tblLoans.getSelectedRow());
    }
    
    public void setSelectedRow(int indexRow) {
        int index = this.tblLoans.convertRowIndexToView(indexRow);
        this.tblLoans.setRowSelectionInterval(index, index);
    }
    
    //popup
    private void showPopupMenu(MouseEvent e) {
        jPopupMenuLoans.show(this, e.getX()+5, e.getY()+100);
    }//endpopup    
	
	
	public void setEnableAdd(){
        this.btnAdd.setEnabled(true);
    }
    
    public void setEnableEdit(){
        this.btnEdit.setEnabled(true);
    }
    
    public void setEnableAcept(){
        this.btnAcept.setEnabled(true);
    }
    
    public void setEnableCancel(){
        this.btnCancel.setEnabled(true);
    }
    
    public void setDisableAdd(){
        this.btnAdd.setEnabled(false);
    }
    
    public void setDisableEdit(){
        this.btnEdit.setEnabled(false);
    }
    
    public void setDisableCancel(){
        this.btnCancel.setEnabled(false);
    }
    
    public void setDisableAcept(){
        this.btnAcept.setEnabled(false);
    }
    
    public void setBotones(int inicio){
        if (inicio == 0){
            setEnableEdit();
            setEnableAdd();
            setDisableCancel();
            setDisableAcept();
        } else {
            setDisableEdit();
            setDisableAdd();
            setEnableCancel();
            setEnableAcept();
        }
    }
    
    public void setEditFicha(){
        
        java.sql.Date fecha = (java.sql.Date)this.tblLoans.getValueAt(this.tblLoans.getSelectedRow(),4);
        long longfecha = fecha.getTime();
        setFechaInicio(new Date(longfecha));
        fecha = (java.sql.Date)this.tblLoans.getValueAt(this.tblLoans.getSelectedRow(),5);
        java.sql.Date fechaFin=(fecha == null ? fecha : new java.sql.Date(fecha.getTime()) );
        setFechaFin(fechaFin);
        
    }
    public void cancelFicha(){
    limpiaFicha();
    setBotones(0);
    }
    
    public void limpiaFicha(){
        jComboBoxSocios.removeAllItems();
        jComboBoxLibros.removeAllItems();
        FechaInicio.setDate(null);
        FechaFin.setDate(null);
    }
    
    
    public int getIDSocio(){
        String strs = jComboBoxSocios.getSelectedItem().toString();
        StringTokenizer tokens = new StringTokenizer(strs," ");
        while (tokens.hasMoreTokens()){
            String ident = tokens.nextToken();
            if (!(tokens.hasMoreTokens())){
                return(Integer.parseInt(ident.trim()));
            }
        }
        return(-1);
    }

    public int getIDLibro(){
        String strs = jComboBoxLibros.getSelectedItem().toString();
        StringTokenizer tokens = new StringTokenizer(strs," ");
        while (tokens.hasMoreTokens()){
            String ident = tokens.nextToken();
            if (!(tokens.hasMoreTokens())){
                return(Integer.parseInt(ident.trim()));
            }
        }
        return(-1);
    }
    
    public long getFechaInicio(){
        
        long longfecha;
        try {
            java.util.Date fecha = FechaInicio.getDate();
            longfecha = fecha.getTime();
                    return(longfecha);   
        } catch (NullPointerException e){
            //System.out.println("ERROR="+e.toString());
        }
        return(-1);
    }
    
    public long getFechaFin(){
        
        long longfecha;
        try {
            java.util.Date fecha = FechaFin.getDate();
            longfecha = fecha.getTime();
                    return(longfecha);   
        } catch (NullPointerException e){
            //System.out.println("ERROR="+e.toString());
        }
        return(-1);
    }
    
    
    
    public void setComboSocios(ArrayList<String> stringo){
        int numText = stringo.size();
        jComboBoxSocios.removeAllItems();
        for (int i=0; i < numText;i++){
            jComboBoxSocios.addItem(stringo.set(i, stringo.get(i)));
        }
    }
    
    public void setComboLibros(ArrayList<String> stringo){
        int numText = stringo.size();
        jComboBoxLibros.removeAllItems();
        for (int i=0; i < numText;i++){
            jComboBoxLibros.addItem(stringo.set(i, stringo.get(i)));
        }
    }
    
    public void setFechaInicio(Date date){
        FechaInicio.setDate(date);
    }
    
    public void setFechaFin(Date date){
        FechaFin.setDate(date);
    }
    
    public void selectComboSocios(int id){
        String strs;
        StringTokenizer tokens;
            for (int j=0;j<jComboBoxSocios.getItemCount();j++) {
                strs = jComboBoxSocios.getItemAt(j).toString();
                tokens = new StringTokenizer(strs," ");
                while (tokens.hasMoreTokens()){
                    String ident = tokens.nextToken();
                    if (!(tokens.hasMoreTokens())){
                        if (Integer.parseInt(ident.trim())== id){
                            Object objeto = jComboBoxSocios.getItemAt(j);
                            jComboBoxSocios.setSelectedItem(objeto);
                            jComboBoxSocios.repaint();                               
                        }
                    }
                    }
                }      
    }
    
    
    public void selectComboLibros(int id){
        String strs;
        StringTokenizer tokens;
            for (int j=0;j<jComboBoxLibros.getItemCount();j++) {
                strs = jComboBoxLibros.getItemAt(j).toString();
                tokens = new StringTokenizer(strs," ");
                while (tokens.hasMoreTokens()){
                    String ident = tokens.nextToken();
                    if (!(tokens.hasMoreTokens())){
                        if (Integer.parseInt(ident.trim())== id){
                            Object objeto = jComboBoxLibros.getItemAt(j);
                            jComboBoxLibros.setSelectedItem(objeto);
                            jComboBoxLibros.repaint();                               
                        }
                    }
                    }
                }      
    }
    
    public int getIDPrestamo(){
        int id = (Integer)(this.tblLoans.getValueAt(getSelectedRow(),1));
        return id;
    }
    
    public boolean isFechaValida() {
        if (this.getFechaInicio()==-1){
            JOptionPane.showMessageDialog(this, "Introduzca una fecha de inicio válida", "Ventana de notificación", JOptionPane.ERROR_MESSAGE);
            return false;
        }
        if (this.getFechaFin()==-1){
            JOptionPane.showMessageDialog(this, "Introduzca una fecha de final válida", "Ventana de notificación", JOptionPane.ERROR_MESSAGE);
            return false;
        }
        return true;
    }
    
    public boolean isSelectedRow(){
        if (this.tblLoans.getSelectedRows().length == 0){
            JOptionPane.showMessageDialog(this, "Seleccione algún préstamo de la tabla", "Ventana de notificación", JOptionPane.ERROR_MESSAGE);
            return false;
        }   
        return true;
    }
    
    public void changeLanguage() {
        LocaleManager lm = LocaleManager.getInstance();
        this.setTitle(lm.getText("TITLE_LOANS_MANAGEMENT"));
        this.jLabel10.setText(lm.getText("TITLE_LOANS_MANAGEMENT"));
        this.btnAdd.setText(lm.getText("BUTTON_ADD"));
        this.btnEdit.setText(lm.getText("BUTTON_EDIT"));
        this.btnDelete.setText(lm.getText("BUTTON_DELETE"));
        this.btnPreview.setText(lm.getText("BUTTON_PREVIEW"));
        this.btnPrint.setText(lm.getText("BUTTON_PRINT"));
        this.btnAcept.setText(lm.getText("BUTTON_OK"));
        this.btnCancel.setText(lm.getText("BUTTON_CANCEL"));
		
		//popup
        this.jMenuItemAddLoan.setText(lm.getText("MENU_POPUP_ADD"));
        this.jMenuItemEditLoan.setText(lm.getText("MENU_POPUP_EDIT"));
        this.jMenuItemDeleteLoan.setText(lm.getText("MENU_POPUP_DELETE"));
		//endpopup   
		
    }
    
}
